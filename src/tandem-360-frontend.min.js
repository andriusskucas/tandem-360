!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e:e(jQuery)}(function(e){function t(t){var a=t||window.event,o=s.call(arguments,1),l=0,d=0,u=0,f=0,h=0,p=0;if(t=e.event.fix(a),t.type="mousewheel","detail"in a&&(u=-1*a.detail),"wheelDelta"in a&&(u=a.wheelDelta),"wheelDeltaY"in a&&(u=a.wheelDeltaY),"wheelDeltaX"in a&&(d=-1*a.wheelDeltaX),"axis"in a&&a.axis===a.HORIZONTAL_AXIS&&(d=-1*u,u=0),l=0===u?d:u,"deltaY"in a&&(u=-1*a.deltaY,l=u),"deltaX"in a&&(d=a.deltaX,0===u&&(l=-1*d)),0!==u||0!==d){if(1===a.deltaMode){var g=e.data(this,"mousewheel-line-height");l*=g,u*=g,d*=g}else if(2===a.deltaMode){var m=e.data(this,"mousewheel-page-height");l*=m,u*=m,d*=m}if(f=Math.max(Math.abs(u),Math.abs(d)),(!r||r>f)&&(r=f,_(a,f)&&(r/=40)),_(a,f)&&(l/=40,d/=40,u/=40),l=Math[l>=1?"floor":"ceil"](l/r),d=Math[d>=1?"floor":"ceil"](d/r),u=Math[u>=1?"floor":"ceil"](u/r),c.settings.normalizeOffset&&this.getBoundingClientRect){var v=this.getBoundingClientRect();h=t.clientX-v.left,p=t.clientY-v.top}return t.deltaX=d,t.deltaY=u,t.deltaFactor=r,t.offsetX=h,t.offsetY=p,t.deltaMode=0,o.unshift(t,l,d,u),i&&clearTimeout(i),i=setTimeout(n,200),(e.event.dispatch||e.event.handle).apply(this,o)}}function n(){r=null}function _(e,t){return c.settings.adjustOldDeltas&&"mousewheel"===e.type&&t%120===0}var i,r,a=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],o="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],s=Array.prototype.slice;if(e.event.fixHooks)for(var l=a.length;l;)e.event.fixHooks[a[--l]]=e.event.mouseHooks;var c=e.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var n=o.length;n;)this.addEventListener(o[--n],t,!1);else this.onmousewheel=t;e.data(this,"mousewheel-line-height",c.getLineHeight(this)),e.data(this,"mousewheel-page-height",c.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var n=o.length;n;)this.removeEventListener(o[--n],t,!1);else this.onmousewheel=null;e.removeData(this,"mousewheel-line-height"),e.removeData(this,"mousewheel-page-height")},getLineHeight:function(t){var n=e(t),_=n["offsetParent"in e.fn?"offsetParent":"parent"]();return _.length||(_=e("body")),parseInt(_.css("fontSize"),10)||parseInt(n.css("fontSize"),10)||16},getPageHeight:function(t){return e(t).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})}),function(e){var t="function"==typeof define&&define.amd&&(define(["jquery"],e)||!0),n=!t&&"object"==typeof module&&"object"==typeof module.exports&&(module.exports=e);!t&&!n&&e()}(function(){return jQuery.reel||function($,window,document,undefined){function add_instance(e){return reel.instances.push(e[0])&&e}function remove_instance(e){return(reel.instances=reel.instances.not(hash(e.attr(_id_))))&&e}function leader(e){return reel.instances.first().data(e)}function embedded(e){return"data:image/gif;base64,R0lGODlh"+e}function tag(e){return"<"+e+"/>"}function dot(e){return"."+(e||"")}function cdn(e){return e.replace(_cdn_,reel.cdn)}function url(e){return"url('"+reen(e)+"')"}function axis(e,t){return typeof t==_object_?t[e]:t}function min_max(e,t,n){return max(e,min(t,n))}function negative_when(e,t){return abs(e)*(t?-1:1)}function pointer(e){return e.touch||e.originalEvent.touches&&e.originalEvent.touches[0]||e}function gyro(e){return e.originalEvent}function px(e){return e===undefined?0:typeof e==_string_?e:e+"px"}function hash(e){return"#"+e}function pad(e,t,n){for(;e.length<t;)e=n+e;return e}function twochar(e){return pad(e,2,"0")}function reen(e){return encodeURI(decodeURI(e))}function soft_array(e){return reel.re.array.exec(e)?e.split(reel.re.array):e}function detached(e){return!e.parents(_html_).length}function numerize_array(e){return typeof e==_string_?e:$.each(e,function(t,n){e[t]=n?+n:undefined})}function error(e){try{console.error("[ Reel ] "+e)}catch(t){}}function tandem_360_display_hotspots(el,frame){if(el=$(el),el.data("allowhotspots")){var hotspots=el.data("hotspots");hotspots=eval("("+hotspots+")");var frames=el.data("frames"),deg=360*frame/frames*-1,deg2=el.data("mainrotate"),id=el.attr("id");el.parent().find(".info-block").length&&el.parent().find(".info-block.active").fadeOut(300,function(){el.parent().find(".info-block.active").remove()}),el.parent().find("#hotspots").remove();for(var width=el.width()/2,height=el.height()/2,spotsHtml='<div id="hotspots" style="transform:rotateX('+deg2+'deg);"><div id="hotspots_holder" style="transform:rotateY('+deg+'deg);">',i=0;i<hotspots.length;i++)for(var hott=hotspots[i],tX=width*hott.x/100,tZ=width*hott.z/100,tY=height*hott.y/100,bounds=hott.frames,extraclass=hott.extraclass,j=0;j<bounds.length;j++)frame>=parseInt(bounds[j].min)&&frame<=parseInt(bounds[j].max)&&(spotsHtml+='<div class="hotspot '+extraclass+'" id="hs-'+id+"-"+i+'" data-iii="'+i+'"  style="transform:translateZ('+tZ+"px) translateX("+tX+"px) translateY("+tY+"px) rotateY("+-1*deg+'deg);"></div>');spotsHtml+="</div></div>",el.parent().append(spotsHtml)}}function tandem_360_display_hot_info(el,spot){el=$(el);var id=spot.target.id;el.parent().find(".info-block").length&&el.parent().find(".info-block.active").fadeOut(0,function(){el.parent().find(".info-block.active").remove()});var ind=$("#"+id).data("iii"),hotspots=el.data("hotspots");hotspots=eval("("+hotspots+")");var spot=hotspots[ind],title=spot.title,desc=spot.desc,width=$(window).width(),height=$(window).height(),xx=el.offset().left,yy=el.offset().top,x=$("#"+id).offset().left-xx,y=$("#"+id).offset().top-yy;760>width&&(x=0,y=0);var block=$('<div class="info-block active"><h4>'+title+"</h4>"+desc+"</div>");block.css({top:y,left:x,display:"none","max-width":width-$("#"+id).offset().left}).appendTo(el.parent()).fadeIn(400)}if($){var version=$&&$().jquery.split(/\./);if(!version||+(twochar(version[0])+twochar(version[1])+twochar(version[2]||""))<10602)return error("Too old jQuery library. Please upgrade your jQuery to version 1.6.2 or higher");var reel=$.reel={version:"1.3.0",def:{frame:1,frames:36,loops:!0,clickfree:!1,draggable:!0,scrollable:!0,steppable:!0,throwable:!0,wheelable:!0,orientable:!1,cw:!1,revolution:undefined,stitched:0,directional:!1,row:1,rows:0,rowlock:!1,framelock:!1,orbital:0,vertical:!1,inversed:!1,footage:6,spacing:0,horizontal:!0,suffix:"-reel",image:undefined,images:"",path:"",preload:"fidelity",shy:!1,speed:0,delay:0,timeout:2,duration:undefined,rebound:.5,entry:undefined,opening:0,brake:.23,velocity:0,tempo:36,laziness:6,cursor:undefined,hint:"",indicator:0,klass:"",preloader:2,area:undefined,attr:{},annotations:undefined,responsive:!1,graph:undefined,monitor:undefined},scan:function(){return $(dot(klass)+":not("+dot(overlay_klass)+" > "+dot(klass)+")").each(function(e,t){var n=$(t),_=n.data(),i=(_.images=soft_array(_.images),{});$(dot(annotation_klass)+"[data-for="+n.attr(_id_)+"]").each(function(e,t){var n=$(t),_=n.data(),r=(_.x=numerize_array(soft_array(_.x)),_.y=numerize_array(soft_array(_.y)),n.attr(_id_));_.node=n.removeData();i[r]=_}),_.annotations=i,n.removeData().reel(_)})},fn:{reel:function(){var e=arguments,t=$(this),n=t.data(),_=e[0]||{},i=e[1];if("object"!=typeof _)return":"==_.slice(0,1)?t.trigger(_.slice(1),i):1==e.length?n[_]:(i!==undefined&&(reel.normal[_]&&(i=reel.normal[_](i,n)),n[_]===undefined?n[_]=i:n[_]!==i&&t.trigger(_+"Change",[undefined,n[_]=i])),t);var r=$.extend({},reel.def,_),a=t.filter(_img_).unreel().filter(function(){var e=$(this),t=r.attr,n=t.src||e.attr(_src_),_=t.width||e.attr(_height_)||e.width(),i=t.height||e.attr(_width_)||e.height();return n?_&&i?!0:error("Dimension(s) of the target image unknown"):error("`src` attribute missing on target image")}),o=[];return a.each(function(){var e,t,n,_=$(this),i=function(e,t){return _.reel(e,t)&&a(e)},a=function(e){return _.data(e)},s={setup:function(e){if(!_.hasClass(klass)||!_.parent().hasClass(overlay_klass)){i(_options_,r);var t={src:_.attr(_src_),width:_.attr(_width_)||null,height:_.attr(_height_)||null,style:_.attr(_style_)||null,"class":_.attr(_class_)||null},n=_.attr(r.attr).attr(_src_),l=i(_id_,_.attr(_id_)||_.attr(_id_,klass+"-"+ +new Date).attr(_id_)),c=$.extend({},_.data()),d=i(_images_,r.images||[]),u=i(_stitched_,r.stitched),f=!d.length||u,h=i(_responsive_,r.responsive&&(knows_background_size?!0:!f)),p=i(_truescale_,{}),g=r.loops,m=r.orbital,v=r.revolution,w=r.rows,k=i(_footage_,min(r.footage,r.frames)),y=(i(_spacing_,r.spacing),i(_width_,+_.attr(_width_)||_.width())),x=i(_height_,+_.attr(_height_)||_.height()),A=i(_shy_,r.shy),j=i(_frames_,m&&k||1>=w&&d.length||r.frames),z=w>1||m,w=(i(_revolution_,axis("x",v)||u/2||2*y),i(_revolution_y_,z?axis("y",v)||(w>3?x:x/(5-w)):0),u?1:ceil(j/k)),D=(i(_stitched_travel_,u-(g?0:y)),i(_stitched_shift_,0),hash(l+r.suffix)),C=_.attr(_class_),T=C?C+___:__,M=$(tag(_div_),{id:D.substr(1),"class":T+___+overlay_klass+___+frame_klass+"0"}),I=_.wrap(M.addClass(r.klass)).addClass(klass),M=(o.push(add_instance(I)[0]),I.parent().bind(s.instance));i(_image_,d.length?__:r.image||n.replace(reel.re.image,"$1"+r.suffix+".$2")),i(_cache_,$(tag(_div_),{"class":cache_klass}).appendTo("body")),i(_area_,$()),i(_cached_,[]),i(_frame_,null),i(_fraction_,null),i(_row_,r.row),i(_tier_,0),i(_rows_,w),i(_rowlock_,r.rowlock),i(_framelock_,r.framelock),i(_departure_,i(_destination_,i(_distance_,0))),i(_bit_,1/j),i(_stage_,D),i(_backwards_,i(_speed_,r.speed)<0),i(_loading_,!1),i(_velocity_,0),i(_vertical_,r.vertical),i(_preloaded_,0),i(_cwish_,negative_when(1,!r.cw&&!u)),i(_clicked_location_,{}),i(_clicked_,!1),i(_clicked_on_,i(_clicked_tier_,0)),i(_lo_,i(_hi_,0)),i(_reeling_,!1),i(_reeled_,!1),i(_opening_,!1),i(_brake_,r.brake),i(_center_,!!m),i(_tempo_,r.tempo/(reel.lazy?r.laziness:1)),i(_opening_ticks_,-1),i(_ticks_,-1),i(_annotations_,r.annotations||M.unbind(dot(_annotations_))&&{}),i(_ratio_,1),i(_backup_,{attr:t,data:c}),r.steppable||M.unbind("up.steppable"),r.indicator||M.unbind(".indicator"),b(__,{overflow:_hidden_,position:"relative"}),h||b(__,{width:y,height:x}),h&&$.each(responsive_keys,function(e,t){p[t]=a(t)}),b(____+___+dot(klass),{display:_block_}),b(dot(cache_klass),{position:"fixed",left:px(-100),top:px(-100)},!0),b(dot(cache_klass)+___+_img_,{position:_absolute_,width:10,height:10},!0),pool.bind(s.pool),_.trigger(A?"prepare":"setup")}},instance:{teardown:function(e){var i=_.data(_backup_);_.parent().unbind(s.instance),a(_shy_)?_.parent().unbind(_click_,d):a(_style_).remove()&&a(_area_).unbind(ns),a(_cache_).empty(),clearTimeout(t),clearTimeout(n),$(window).unbind(_resize_,T),$(window).unbind(ns),pool.unbind(s.pool),O.unbind(pns),_.siblings().unbind(ns).remove(),z(),_.removeAttr("onloaded"),remove_instance(_.unbind(ns).removeData().unwrap().attr(i.attr).data(i.data)),_.attr(_style_)==__&&_.removeAttr(_style_)},setup:function(e){function t(e){return _.trigger("down",[pointer(e).clientX,pointer(e).clientY,e])&&e.give}function n(e,t){return!t||_.trigger("wheel",[t,e])&&e.give}var o=_.parent().append(w()),s=i(_area_,$(r.area||o)),l=r.rows>1,c=r.cursor,u=c==_hand_?drag_cursor:c||reel_cursor,f=c==_hand_?drag_cursor_down+___+"!important":undefined;b(___+dot(klass),{MozUserSelect:_none_,WebkitUserSelect:_none_,MozTransform:"translateZ(0)"}),_.unbind(_click_,d),s.bind(_touchstart_,t).bind(r.clickfree?_mouseenter_:_mousedown_,t).bind(r.wheelable?_mousewheel_:null,n).bind(_dragstart_,function(){return!1}),b(__,{cursor:cdn(u)}),b(dot(loading_klass),{cursor:"wait"}),b(dot(panning_klass)+____+dot(panning_klass)+" *",{cursor:cdn(f||u)},!0),a(_responsive_)&&(b(___+dot(klass),{width:"100%",height:_auto_}),$(window).bind(_resize_,T)),r.hint&&s.attr("title",r.hint),r.indicator&&o.append(k("x")),l&&r.indicator&&o.append(k("y")),r.monitor&&o.append(v=$(tag(_div_),{"class":monitor_klass}))&&b(___+dot(monitor_klass),{position:_absolute_,left:0,top:0})},preload:function(e){function t(){var e=u.children(":not([src]):first");return e.attr(_src_,e.data(_src_))}var n=_.parent(),o=a(_images_),s=!o.length,l=reel.preload[r.preload]||reel.preload[reel.def.preload],c=s?[a(_image_)]:l(o.slice(0),r,a),d=(c.length,i(_preloaded_,s?.5:0),0),u=a(_cache_).empty(),f=[];for(n.addClass(loading_klass),i(_style_,a(_style_)||$("<"+_style_+' type="text/css">'+b.rules.join("\n")+"</"+_style_+">").prependTo(_head_)),i(_loading_,!0),_.trigger("stop"),r.responsive&&M(),_.trigger("resize",!0);c.length;){var h=reel.substitute(r.path+c.shift(),a),p=$(tag(_img_)).data(_src_,h).appendTo(u);p.bind("load error abort",function(e){return"load"!=e.type&&_.trigger(e.type),!detached(n)&&_.trigger("preloaded")&&t()&&!1}),f.push(h)}setTimeout(function(){for(;++d<reel.concurrent_requests;)t()},0),i(_cached_,f),i(_shy_,!1)},preloaded:function(e){var t=a(_images_).length||1,n=i(_preloaded_,min(a(_preloaded_)+1,t));if(1===n){_.trigger("frameChange",[undefined,a(_frame_)])}n===t&&(_.parent().removeClass(loading_klass),_.trigger("loaded"))},loaded:function(e){a(_images_).length>1||_.css({backgroundImage:url(reel.substitute(r.path+a(_image_),a))}).attr({src:cdn(transparent)}),a(_stitched_)&&_.attr({src:cdn(transparent)}),a(_reeled_)||i(_velocity_,r.velocity||0),i(_loading_,!1),l=!0},prepare:function(e){_.css("display",_block_).parent().one(_click_,d)},opening:function(e){if(!r.opening)return _.trigger("openingDone");var t=(i(_opening_,!0),i(_stopped_,!a(_speed_)),r.entry||r.speed),n=a(_fraction_),o=r.opening;i(_fraction_,n-t*o),i(_opening_ticks_,ceil(o*leader(_tempo_)))},openingDone:function(e){function n(e){return _.trigger("orient",[gyro(e).alpha,gyro(e).beta,gyro(e).gamma,e])&&e.give}var a=(i(_playing_,!1),i(_opening_,!1),_tick_+dot(_opening_));pool.unbind(a,s.pool[a]),r.orientable&&$(window).bind(_deviceorientation_,n),r.delay>0?t=setTimeout(function(){_.trigger("play")},1e3*r.delay):_.trigger("play")},play:function(e,t){var t=t?i(_speed_,t):a(_speed_)*negative_when(1,a(_backwards_)),n=r.duration,_=(n&&i(_ticks_,ceil(n*leader(_tempo_))),i(_backwards_,0>t),i(_playing_,!!t));i(_stopped_,!_);f()},reach:function(e,t,n){if(t!=a(_frame_)){var r=a(_frames_),o=(i(_row_,ceil(t/r)),i(_departure_,a(_frame_))),t=i(_destination_,t),s=i(_distance_,reel.math.distance(o,t,r)),n=abs(n||a(_speed_))*negative_when(1,0>s);_.trigger("play",n)}},pause:function(e){h()},stop:function(e){var t=i(_stopped_,!0);i(_playing_,!t)},down:function(e,t,n,o){function s(e){return _.trigger("pan",[pointer(e).clientX,pointer(e).clientY,e])&&e.give}function l(e){return _.trigger("up",[e])&&e.give}if(o.target.className.indexOf("hotspot")>-1)return void tandem_360_display_hot_info(_,o);if((r.clickfree||!o||o.button===undefined||o.button==DRAG_BUTTON)&&r.draggable){var c=(i(_clicked_,a(_frame_)),r.clickfree),d=(i(_velocity_,0),c?a(_area_):O);A=I(a(_revolution_),t,n);h(),z(),p=0,$(_html_,O).addClass(panning_klass),d.bind(_touchmove_+___+_mousemove_,s).bind(_touchend_+___+_touchcancel_,l).bind(c?_mouseleave_:_mouseup_,l)}},up:function(e,t){if(t.target.className.indexOf("hotspot")>-1)return void tandem_360_display_hot_info(_,t);var n=(i(_clicked_,!1),i(_reeling_,!1),r.throwable),o=abs(D[0]+D[1])/60,s=i(_velocity_,n?n===!0?o:min(n,o):0);u=s?1:0;h(),z(),$(_html_,O).removeClass(panning_klass),(r.clickfree?a(_area_):O).unbind(pns)},pan:function(e,t,n,_){if(r.draggable&&q){q=!1,h();var o=r.rows,s=r.orbital,l=!a(_reeling_)&&1>=o&&!s&&r.scrollable,c={x:t-A.x,y:n-A.y},d={x:abs(c.x),y:abs(c.y)};if(_&&l&&d.x<d.y)return _.give=!0;if(d.x>0||d.y>0){_&&(_.give=!1),p=max(d.x,d.y),A={x:t,y:n};var u=a(_revolution_),f=a(_clicked_location_),g=a(_vertical_);if(!a(_framelock_)){var m=i(_fraction_,C(g?n-f.y:t-f.x,a(_clicked_on_),u,a(_lo_),a(_hi_),a(_cwish_),g?n-f.y:t-f.x)),v=(i(_reeling_,a(_reeling_)||a(_frame_)!=a(_clicked_)),j(g?c.y:c.x||0));v&&i(_backwards_,0>v)}if(s&&a(_center_))var g=i(_vertical_,abs(n-f.y)>abs(t-f.x)),f=I(u,t,n);if(o>1&&!a(_rowlock_)){var w=a(_revolution_y_),k=a(_clicked_tier_),b=-k*w;i(_tier_,reel.math.envelope(n-f.y,k,w,b,b+w,-1))}if(!(m%1||r.loops))var f=I(u,t,n)}}},wheel:function(e,t,n){if(t){g=!0;var r=ceil(math.sqrt(abs(t))/2),r=negative_when(r,t>0),o=.0833*a(_revolution_);I(o),r&&i(_backwards_,0>r),i(_velocity_,0),i(_fraction_,C(r,a(_clicked_on_),o,a(_lo_),a(_hi_),a(_cwish_)));n&&n.preventDefault(),n&&(n.give=!1),h(),_.trigger("up",[n])}},orient:function(t,n,_,a,o){if(q&&!e){m=!0;var s=n/360;fraction=i(_fraction_,+(r.stitched||r.cw?1-s:s).toFixed(2)),q=!1}},fractionChange:function(e,t,n){if(t===undefined){var _=1+floor(n/a(_bit_)),o=r.rows>1,s=r.orbital;i(_center_,!!s&&(s>=_||_>=a(_footage_)-s+2));if(o)var _=_+(a(_row_)-1)*a(_frames_);var _=i(_frame_,_)}},tierChange:function(e,t,n){if(t===undefined)var _=i(_row_,round(interpolate(n,1,r.rows))),o=a(_frames_),s=a(_frame_)%o||o,s=i(_frame_,s+_*o-o)},rowChange:function(e,t,n){if(t===undefined){H(_tier_,undefined,n,r.rows)}},frameChange:function(e,t,n){if(t===undefined){this.className=this.className.replace(reel.re.frame_klass,frame_klass+n);var o=a(_frames_),s=r.rows,l=r.path,c=n%o||o,d=(n-c)/o+1,u=(d-1)/(s-1),f=a(_row_),h=(s?H(_tier_,u,f,s):a(_tier_),H(_fraction_,undefined,c,o)),p=a(_footage_);if(r.orbital&&a(_vertical_))var n=r.inversed?p+1-n:n,n=n+p;var g=a(_stitched_),m=a(_images_),v=!m.length||g;if(v){var w=a(_spacing_),k=a(_width_),b=a(_height_);if(g){var y=i(_stitched_shift_,round(interpolate(h,0,a(_stitched_travel_)))%g),x=1>=s?0:(b+w)*(s-f),$=[px(-y),px(-x)],A=m.length>1&&m[f-1],j=reel.substitute(l+A,a);A&&_.css("backgroundImage").search(j)<0&&_.css({backgroundImage:url(j)})}else var z=r.horizontal,D=n%p-1,D=0>D?p-1:D,C=floor((n-.1)/p),C=C+(s>1?0:a(_backwards_)?0:r.directional?a(_rows_):0),T=C*((z?b:k)+w),I=D*((z?k:b)+w),$=m.length?[0,0]:z?[px(-I),px(-T)]:[px(-T),px(-I)];_.css({backgroundPosition:$.join(___)})}else a(_responsive_)&&M(),a(_preloaded_)&&_.attr({src:reen(reel.substitute(l+m[n-1],a))});tandem_360_display_hotspots(_,n)}},"frameChange.reach":function(e,t,n){if(a(_destination_)&&t===undefined){var r=reel.math.distance(a(_departure_),n,a(_frames_)),o=abs(r)>=abs(a(_distance_));o&&(i(_frame_,i(_destination_)),i(_destination_,i(_distance_,i(_departure_,0))),_.trigger("stop"))}},"imageChange imagesChange":function(e,t,n){_.trigger("preload")},"fractionChange.indicator":function(e,t,n){if(r.indicator&&t===undefined){var _=r.indicator,i=r.orbital,o=a(i&&a(_vertical_)?_height_:_width_),s=i?a(_footage_):r.images.length||a(_frames_),l=ceil(o/s),o=o-l,c=round(interpolate(n,0,o)),c=!r.cw||a(_stitched_)?c:o-c;k.$x.css(a(_vertical_)?{left:0,top:px(c),bottom:_auto_,width:_,height:l}:{bottom:0,left:px(c),top:_auto_,width:l,height:_})}},"tierChange.indicator":function(e,t,n){if(r.rows>1&&r.indicator&&t===undefined){var _=a(_height_),i=r.indicator,o=ceil(_/r.rows),_=_-o,s=round(n*_);k.$y.css({left:0,top:s,width:i,height:o})}},"setup.annotations":function(e){var t=_.parent();$.each(a(_annotations_),function(e,n){var i=typeof n.node==_string_?$(n.node):n.node||{},i=i.jquery?i:$(tag(_div_),i),i=i.attr({id:e}).addClass(annotation_klass),r=n.image?$(tag(_img_),n.image):$(),a=n.link?$(tag("a"),n.link).click(function(){_.trigger("up.annotations",{target:a})}):$();b(hash(e),{display:_none_,position:_absolute_},!0),n.image||n.link&&i.append(a),n.link||n.image&&i.append(r),n.link&&n.image&&i.append(a.append(r)),i.appendTo(t)})},"prepare.annotations":function(e){$.each(a(_annotations_),function(e,t){$(hash(e)).hide()})},"frameChange.annotations":function(e,t,n){if(a(_preloaded_)&&t===undefined){var _=a(_width_),i=a(_stitched_),r=a(_stitched_shift_);$.each(a(_annotations_),function(e,t){var n=$(hash(e)),o=t.start||1,s=t.end,l=l||a(_frame_),c=l-1,d=t.at?"+"==t.at[c]:!1,c=t.at?c:c-o+1,u=typeof t.x!=_object_?t.x:t.x[c],f=typeof t.y!=_object_?t.y:t.y[c],h=u!==undefined&&f!==undefined,p=h&&(t.at?d:c>=0&&(!s||s-o>=c));if(i)var g=_>u&&r>i-_,m=u>i-_&&r>=0&&_>r,u=g?u+i:u,u=m?u-i:u,u=u-r;if(a(_responsive_))var v=a(_ratio_),u=u&&u*v,f=f&&f*v;var w={display:p?_block_:_none_,left:px(u),top:px(f)};n.css(w)})}},"up.annotations":function(e,t){if(!(p>10||g)){var n=$(t.target),_=n.is("a")?n:n.parents("a"),i=_.attr("href");i&&(p=10)}},"up.steppable":function(e,t){p||g||_.trigger(a(_clicked_location_).x-_.offset().left>.5*a(_width_)?"stepRight":"stepLeft")},"stepLeft stepRight":function(e){h()},stepLeft:function(e){i(_backwards_,!1),i(_fraction_,a(_fraction_)-a(_bit_)*a(_cwish_))},stepRight:function(e){i(_backwards_,!0),i(_fraction_,a(_fraction_)+a(_bit_)*a(_cwish_))},stepUp:function(e){i(_row_,a(_row_)-1)},stepDown:function(e){i(_row_,a(_row_)+1)},resize:function(e,t){if(!a(_loading_)||t){var n=a(_stitched_),i=a(_spacing_),o=a(_height_),s=!a(_images_).length||n,l=r.rows||1,c=a(_images_).length?n?px(n)+___+px(o):undefined:n&&px(n)+___+px((o+i)*l-i)||px((a(_width_)+i)*a(_footage_)-i)+___+px((o+i)*a(_rows_)*l*(r.directional?2:1)-i);_.css({height:s?px(o):null,backgroundSize:c||null}),t||_.trigger("imagesChange")}},"setup.fu":function(e){i(_frame_,r.frame+(a(_row_)-1)*a(_frames_));_.trigger("preload")},"wheel.fu":function(){g=!1},"clean.fu":function(){_.trigger("teardown")},"loaded.fu":function(){_.trigger("opening")}},pool:{"tick.reel.preload":function(e){if((l||a(_loading_))&&!a(_shy_)){var t=a(_width_),n=number(w.$.css(_width_)),_=a(_images_).length||1,i=round(1/_*a(_preloaded_)*t);w.$.css({width:n+(i-n)/3+1}),a(_preloaded_)===_&&n>t-1&&(l=!1,w.$.fadeOut(300,function(){w.$.css({opacity:1,width:0})}))}},"tick.reel":function(t){if(!a(_shy_)){var n=a(_velocity_),o=leader(_tempo_),s=r.monitor;if(reel.intense||!y()){if(u)var l=n-a(_brake_)/o*u,n=i(_velocity_,l>.1?l:u=e=0);if(s&&v.text(a(s)),n&&u++,e&&e++,j(0),q=!0,e&&!n)return c(t);if(a(_clicked_))return c(t,h());if(!(a(_opening_ticks_)>0)){if(!r.loops&&r.rebound){var d=(e||a(_fraction_)%1?x=0:x++,x>=1e3*r.rebound/o);d&&i(_backwards_,!a(_backwards_))}var f=a(_cwish_)*negative_when(1,a(_backwards_)),p=a(_ticks_),g=(a(_playing_)&&!m&&p?abs(a(_speed_))+n:n)/leader(_tempo_),p=(i(_fraction_,a(_fraction_)-g*f),r.duration?p>0&&i(_ticks_,p-1):p);!p&&a(_playing_)&&_.trigger("stop")}}}},"tick.reel.opening":function(e){if(a(_opening_)){var t=r.entry||r.speed,n=t/leader(_tempo_)*(r.cw?-1:1),o=i(_opening_ticks_,a(_opening_ticks_)-1);i(_fraction_,a(_fraction_)+n);o||_.trigger("openingDone")}}}},l=!1,c=function(e,t){return e.stopImmediatePropagation()||t},d=function(){_.trigger("setup")},u=0,f=function(){return e=0},h=function(){return clearTimeout(t),pool.unbind(_tick_+dot(_opening_),s.pool[_tick_+dot(_opening_)]),i(_opening_ticks_,0),i(_reeled_,!0),e=-r.timeout*leader(_tempo_)},p=0,g=!1,m=!1,v=$(),w=function(){return b(___+dot(preloader_klass),{position:_absolute_,left:0,bottom:0,height:r.preloader,overflow:_hidden_,backgroundColor:"#000"}),w.$=$(tag(_div_),{"class":preloader_klass})},k=function(e){return b(___+dot(indicator_klass)+dot(e),{position:_absolute_,width:0,height:0,overflow:_hidden_,backgroundColor:"#000"}),k["$"+e]=$(tag(_div_),{"class":indicator_klass+___+e})},b=function(e,t,n){function _(e){var t=[];return $.each(e,function(e,n){t.push(e.replace(/([A-Z])/g,"-$1").toLowerCase()+":"+px(n)+";")}),"{"+t.join(__)+"}"}var i=n?__:a(_stage_),e=e.replace(/^/,i).replace(____,____+i);return b.rules.push(e+_(t))&&t},y=function(){var e=a(_height_),t=a(_width_),n=_[0].getBoundingClientRect();return n.top<-e||n.left<-t||n.right>t+$(window).width()||n.bottom>e+$(window).height()},x=0,A={x:0,y:0},j=function(e){return D.push(e)&&D.shift()&&e},z=function(){return D=[0,0]},D=z(),C=r.graph||reel.math[r.loops?"hatch":"envelope"],T=(reel.normal,function(){clearTimeout(n),n=setTimeout(M,reel.resize_gauge)}),M=function(){if(_.width()!=a(_width_)){var e=a(_truescale_),t=i(_ratio_,_.width()/e.width);$.each(e,function(e,n){i(e,round(n*t))}),_.trigger("resize")}},I=function(e,t,n){var _=i(_clicked_on_,a(_fraction_)),o=(i(_clicked_tier_,a(_tier_)),r.loops);i(_lo_,o?0:-_*e),i(_hi_,o?e:e-_*e);return t!==undefined&&i(_clicked_location_,{x:t,y:n})||undefined},q=!0,H=function(e,t,n,_){if(_){var r=a(e)||0,o=t!==undefined?t:(n-1)/(_-1),o=e!=_fraction_?o:min(o,.9999),s=+abs(r-o).toFixed(8)>=+(1/(_-1)).toFixed(8),t=s?i(e,o):t||r;return t}},O=pool;try{pool[0]!=top.document&&(O=pool.add(top.document))}catch(X){}top===self?$():function(e){return $("iframe",O.last()).each(function(){try{if($(this).contents().find(_head_).html()==$(_head_).html())return(e=$(this))&&!1}catch(t){}}),e}();b.rules=[],s.setup()}),ticker=ticker||function s(){var e=+new Date,t=leader(_tempo_);return t?(pool.trigger(_tick_),reel.cost=(+new Date+reel.cost-e)/2,ticker=setTimeout(s,max(4,1e3/t-reel.cost))):ticker=null}(),$(o)},unreel:function(){return this.trigger("teardown")}},re:{image:/^(.*)\.(jpg|jpeg|png|gif)\??.*$/i,ua:[/(msie|opera|firefox|chrome|safari)[ \/:]([\d.]+)/i,/(webkit)\/([\d.]+)/i,/(mozilla)\/([\d.]+)/i],array:/ *, */,lazy_agent:/\(iphone|ipod|android|fennec|blackberry/i,frame_klass:/frame-\d+/,substitution:/(@([A-Z]))/g,no_match:/^(undefined|)$/,sequence:/(^[^#|]*([#]+)[^#|]*)($|[|]([0-9]+)\.\.([0-9]+))($|[|]([0-9]+)$)/},cdn:"http://code.vostrel.net/",math:{envelope:function(e,t,n,_,i,r,a){return t+min_max(_,i,-e*r)/n},hatch:function(e,t,n,_,i,r,a){var e=(_>e?i:0)+e%i,o=t+-e*r/n;return o-floor(o)},interpolate:function(e,t,n){return t+e*(n-t)},distance:function(e,t,n){var _=n/2,i=t-e;return-_>i?i+n:i>_?i-n:i}},preload:{fidelity:function(e,t,n){function _(e,n,_){function i(e){for(;!(e>=1&&s>=e);)e+=1>e?+s:-s;return l[_+e]||(l[_+e]=!!r.push(e))}if(!e.length)return[];for(var r=[],a=4*n,o=t.frame,s=e.length,c=!0,d=s/a,u=0;a>u;u++)i(o+round(u*d));for(;d>1;){var u=0,f=r.length,d=d/2;for(c=!c;f>u;u++)i(r[u]+(c?1:-1)*round(d))}for(var u=0;s>=u;u++)i(u);for(var u=0;u<r.length;u++)r[u]=e[r[u]-1];return r}var i=t.orbital,r=i?2:t.rows||1,a=n(i?_footage_:_frames_),o=(t.row-1)*a,s=(new Array).concat(e),l=new Array(e.length+1),c=2>r?[]:s.slice(o,o+a);return _(c,1,o).concat(_(s,r,0))},linear:function(e,t,n){return e}},substitute:function(e,t){return e.replace(reel.re.substitution,function(e,n,_){return"function"==typeof reel.substitutes[_]?reel.substitutes[_](t):substitution_keys[_]?t(substitution_keys[_]):n})},substitutes:{T:function(e){return+new Date}},normal:{fraction:function(e,t){return null===e?e:t[_options_].loops?e-floor(e):min_max(0,1,e)},tier:function(e,t){return null===e?e:min_max(0,1,e)},row:function(e,t){return null===e?e:round(min_max(1,t[_options_].rows,e))},frame:function(e,t){if(null===e)return e;var n=t[_options_],_=t[_frames_]*(n.orbital?2:n.rows||1),i=round(n.loops?e%_||_:min_max(1,_,e));return 0>i?i+_:i},images:function(e,t){var n=reel.re.sequence.exec(e),_=n?reel.sequence(n,t[_options_]):e;return _}},sequence:function(e,t){if(e.length<=1)return t.images;for(var n=[],_=t.orbital,i=e[1],r=e[2],a=e[4],a=reel.re.no_match.test(a+__)?1:+a,o=_?2:t.rows||1,s=_?t.footage:t.stitched?1:t.frames,l=+(e[5]||o*s),c=l-a,d=+e[7]||1,u=0;c>=u;)n.push(i.replace(r,pad(a+u+__,r.length,"0"))),u+=d;return n},instances:$(),leader:leader,resize_gauge:300,concurrent_requests:4,cost:0},pool=$(document),client=navigator.userAgent,browser=reel.re.ua[0].exec(client)||reel.re.ua[1].exec(client)||reel.re.ua[2].exec(client),browser_version=+browser[2].split(".").slice(0,2).join("."),ie="MSIE"==browser[1],knows_data_urls=!(ie&&8>browser_version),knows_background_size=!(ie&&9>browser_version),ticker,klass="reel",overlay_klass=klass+"-overlay",cache_klass=klass+"-cache",indicator_klass=klass+"-indicator",preloader_klass=klass+"-preloader",monitor_klass=klass+"-monitor",annotation_klass=klass+"-annotation",panning_klass=klass+"-panning",loading_klass=klass+"-loading",frame_klass="frame-",math=Math,round=math.round,floor=math.floor,ceil=math.ceil,min=math.min,max=math.max,abs=math.abs,number=parseInt,interpolate=reel.math.interpolate,_annotations_="annotations",_area_="area",_auto_="auto",_backup_="backup",_backwards_="backwards",_bit_="bit",_brake_="brake",_cache_="cache",_cached_=_cache_+"d",_center_="center",_class_="class",_click_="click",_clicked_=_click_+"ed",_clicked_location_=_clicked_+"_location",_clicked_on_=_clicked_+"_on",_clicked_tier_=_clicked_+"_tier",_cwish_="cwish",_departure_="departure",_destination_="destination",_distance_="distance",_footage_="footage",_fraction_="fraction",_frame_="frame",_framelock_="framelock",_frames_="frames",_height_="height",_hi_="hi",_hidden_="hidden",_image_="image",_images_="images",_lo_="lo",_loading_="loading",_mouse_="mouse",_opening_="opening",_opening_ticks_=_opening_+"_ticks",_options_="options",_playing_="playing",_preloaded_="preloaded",_ratio_="ratio",_reeling_="reeling",_reeled_="reeled",_responsive_="responsive",_revolution_="revolution",_revolution_y_="revolution_y",_row_="row",_rowlock_="rowlock",_rows_="rows",_shy_="shy",_spacing_="spacing",_speed_="speed",_src_="src",_stage_="stage",_stitched_="stitched",_stitched_shift_=_stitched_+"_shift",_stitched_travel_=_stitched_+"_travel",_stopped_="stopped",_style_="style",_tempo_="tempo",_ticks_="ticks",_tier_="tier",_touch_="touch",_truescale_="truescale",_velocity_="velocity",_vertical_="vertical",_width_="width",ns=dot(klass),pns=dot("pan")+ns,_deviceorientation_="deviceorientation"+ns,_dragstart_="dragstart"+ns,_mousedown_=_mouse_+"down"+ns,_mouseenter_=_mouse_+"enter"+ns,_mouseleave_=_mouse_+"leave"+pns,_mousemove_=_mouse_+"move"+pns,_mouseup_=_mouse_+"up"+pns,_mousewheel_=_mouse_+"wheel"+ns,_tick_="tick"+ns,_touchcancel_=_touch_+"cancel"+pns,_touchend_=_touch_+"end"+pns,_touchstart_=_touch_+"start"+ns,_touchmove_=_touch_+"move"+pns,_resize_="resize"+ns,__="",___=" ",____=",",_absolute_="absolute",_block_="block",_cdn_="@CDN@",_div_="div",_hand_="hand",_head_="head",_html_="html",_id_="id",_img_="img",_jquery_reel_="jquery."+klass,_move_="move",_none_="none",_object_="object",_preload_="preload",_string_="string",responsive_keys=[_width_,_height_,_spacing_,_revolution_,_revolution_y_,_stitched_,_stitched_shift_,_stitched_travel_],substitution_keys={W:_width_,H:_height_},transparent=knows_data_urls?embedded("CAAIAIAAAAAAAAAAACH5BAEAAAAALAAAAAAIAAgAAAIHhI+py+1dAAA7"):_cdn_+"blank.gif",reel_cursor=url(_cdn_+_jquery_reel_+".cur")+____+_move_,drag_cursor=url(_cdn_+_jquery_reel_+"-drag.cur")+____+_move_,drag_cursor_down=url(_cdn_+_jquery_reel_+"-drag-down.cur")+____+_move_,lazy=reel.lazy=reel.re.lazy_agent.test(client),DRAG_BUTTON=ie&&9>browser_version?1:0,cleanData=$.cleanData,cleanDataEvent=$.cleanData=function(e){return $(e).each(function(){$(this).triggerHandler("clean")}),cleanData.apply(this,arguments)};return $.extend($.fn,reel.fn)&&$(reel.scan),reel}}(jQuery,window,document)}),jQuery(document).ready(function(e){function t(e){var t=e,n=t.attr("id"),_=t.data("images").split(","),i=t.data("speed"),r=t.data("wheelable"),a=(t.attr("src"),t.data("autostart"));a||(i=0),jQuery("#"+n).reel({images:_,speed:i,wheelable:r,responsive:!0,delay:2})}e("img.tandem-360-reel").each(function(n,_){var i=e(_),r=i.data("playonclick");r?i.click(function(){i=e(this),i.unbind(),t(i),i.removeClass("tandem-360-reel-click-to-play")}).addClass("tandem-360-reel-click-to-play"):t(i)})});

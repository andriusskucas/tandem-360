function render_hotspots_admin(){jQuery("#hotspots").html("");for(var e='<table width="100%" cellpadding="10">',t=0;t<hotspots.length;t++)e+="<tr><td>"+hotspots[t].title+'</td><td class="tandem360buttons"><a href="#" onClick="edit_hotspot('+t+'); return false;" class="button button-primary">Redaguoti</a><a href="#" onClick="delete_hotspot('+t+'); return false;" class="button button-secondary">Trinti</a></td></tr>';e+="</table>",jQuery("#tandem_360_alll_hotspots_field").val(JSON.stringify(hotspots)),jQuery("#hotspots").append(e)}function delete_hotspot(e){hotspots.splice(e,1),render_hotspots_admin()}function edit_hotspot(e){jQuery("#tandem_360_new_hot_title_field").val(hotspots[e].title),tinyMCE.get("tandem_360_new_hot_desc_field").setContent(hotspots[e].desc),jQuery("#tandem_360_new_hot_x_field").val(hotspots[e].x),jQuery("#tandem_360_new_hot_y_field").val(hotspots[e].y),jQuery("#tandem_360_new_hot_z_field").val(hotspots[e].z),jQuery("#tandem_360_new_hot_class_field").val(hotspots[e].extraclass),jQuery(".tandem_360_new_frames_field").each(function(t,a){a=jQuery(a);var _=hotspots[e].allFrames.indexOf(a.val());_>-1?a.prop("checked",!0):a.prop("checked",!1)}),jQuery("#ad_spot_wrap").fadeIn(600),jQuery("#add_hotspot_row").hide(),jQuery("#save_hotspot_row").data("ii",e).show()}jQuery(document).ready(function(e){e("#add_btnn").click(function(t){t.preventDefault();var a=wp.media({title:"Upload Image",multiple:!0}).open().on("select",function(t){e("#selected_360_images").html("");for(var _=a.state().get("selection").length,n=a.state().get("selection").models,l=new Array,s=0;_>s;s++){var o=n[s].changed.url,i=n[s].changed.sizes.thumbnail.url,d=n[s].changed.title,r={image_url:o,image_thumb:i,title:d};l.push(r)}var h=l.length;e("#tandem_360_frames_field").val(h);for(var f=h-1;f>=0;f--)for(var c=1;f>=c;c++)if(parseInt(l[c-1].title)>parseInt(l[c].title)){var p=l[c-1];l[c-1]=l[c],l[c]=p}for(var s=0;s<l.length;s++)e("#selected_360_images").append('<img src="'+l[s].image_thumb+'" style="margin:10px;"/>');e("#tandem_360_images_field").val(JSON.stringify(l))})}),e.fn.shiftSelectable=function(){var e,t=this;t.click(function(a){if(!e)return void(e=this);if(a.shiftKey){var _=t.index(this),n=t.index(e);t.slice(Math.min(_,n),Math.max(_,n)+1).attr("checked",e.checked).trigger("change")}e=this})},e(".tandem_360_new_frames_field").shiftSelectable(),e("#add_hotspot").click(function(t){t.preventDefault(),e("#ad_spot_wrap").fadeIn(600),e("#add_hotspot_row").show(),jQuery("#save_hotspot_row").hide()}),e("#save_hotspot_row").click(function(t){t.preventDefault();var a=e(this).data("ii"),_=new Array,n=new Array,l=e(".tandem_360_new_frames_field:checked"),s=l.eq(0).val(),o=l.eq(0).val(),i=e("#tandem_360_new_hot_title_field").val(),d=tinyMCE.get("tandem_360_new_hot_desc_field").getContent(),r=e("#tandem_360_new_hot_x_field").val(),h=e("#tandem_360_new_hot_y_field").val(),f=e("#tandem_360_new_hot_z_field").val(),c=e("#tandem_360_new_hot_class_field").val();l.each(function(t,a){if(a=e(a),n.push(a.val()),s<a.val()-1||t==l.length-1){var i=t-1;if(t==l.length-1&&(i=t),i==t&&s<a.val()-1){var d={min:o,max:l.eq(i-1).val()};_.push(d),o=a.val()}var d={min:o,max:l.eq(i).val()};_.push(d),o=a.val()}s=a.val()});var p={title:i,desc:d,x:r,y:h,z:f,frames:_,allFrames:n,extraclass:c};hotspots[a]=p,render_hotspots_admin(),e("#ad_spot_wrap").fadeOut(600)}),e("#add_hotspot_row").click(function(t){t.preventDefault();var a=new Array,_=new Array,n=e(".tandem_360_new_frames_field:checked"),l=n.eq(0).val(),s=n.eq(0).val(),o=e("#tandem_360_new_hot_title_field").val(),i=tinyMCE.get("tandem_360_new_hot_desc_field").getContent(),d=e("#tandem_360_new_hot_x_field").val(),r=e("#tandem_360_new_hot_y_field").val(),h=e("#tandem_360_new_hot_z_field").val(),f=e("#tandem_360_new_hot_class_field").val();n.each(function(t,o){if(o=e(o),_.push(o.val()),l<o.val()-1||t==n.length-1){var i=t-1;if(t==n.length-1&&(i=t),i==t&&l<o.val()-1){var d={min:s,max:n.eq(i-1).val()};a.push(d),s=o.val()}var d={min:s,max:n.eq(i).val()};a.push(d),s=o.val()}l=o.val()});var c={title:o,desc:i,x:d,y:r,z:h,frames:a,allFrames:_,extraclass:f};hotspots.push(c),render_hotspots_admin(),e("#ad_spot_wrap").fadeOut(600)}),e("#close_tandem_360").click(function(t){t.preventDefault(),e("#ad_spot_wrap").fadeOut(600)})});
